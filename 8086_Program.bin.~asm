CODE SEGMENT
START:
MOV AL, 80H
OUT 000EH, AL
OUT 0006H, AL
AGAIN:
;FIRST INITIALIZED CONDITION
MOV BH, 03H ; INITIALIZING COUNTS
MOV BL, 03H
MOV DH, 06H
MOV DL, 09H
MOV AL, 0CH
OUT 0004H, AL ; SETTING UP LIGHTS
MOV AL, 09H
OUT 000CH, AL ; WE CAN ALSO USE BSR MODE
;MOV AL, 05H
;OUT 0006H, AL
;MOV AL, 07H
;OUT 0006H, AL
;MOV AL, 01H
;OUT 000EH, AL
;MOV AL, 07H
;OUT 000EH, AL
MOV AH, 02H ; COUNTER FOR FIRST TWO COUNTS
LOOP2:
CALL DISPLAY
DEC BH
DEC BL
DEC DH
DEC DL
CALL DELAY
DEC AH
JNZ LOOP2
CALL DISPLAY
MOV AL, 0AH ; SETTING UP YELLOW LIGHT
OUT 0004H, AL
DEC BH
DEC BL
DEC DH
DEC DL
CALL DELAY
CALL DISPLAY


;SECOND INITIALIZED CONDITION
MOV BH, 09H
MOV BL, 03H
MOV DH, 03H
MOV DL, 06H
MOV AL, 21H
OUT 0004H, AL; SETTING UP LIGHTS
MOV AL, 09H
OUT 000CH, AL
MOV AH, 02H
LOOP3:
CALL DISPLAY
DEC BH
DEC BL
DEC DH
DEC DL
CALL DELAY
DEC AH
JNZ LOOP3
CALL DISPLAY
MOV AL, 11H
OUT 0004H, AL
DEC BH
DEC BL
DEC DH
DEC DL
CALL DELAY
CALL DISPLAY


;THIRD INITIALIZED CONDITION
MOV BH, 06H
MOV BL, 09H
MOV DH, 03H
MOV DL, 03H
MOV AL, 09H
OUT 0004H, AL; SETTING UP LIGHTS
MOV AL, 0CH
OUT 000CH, AL
MOV AH, 02H
LOOP4:
CALL DISPLAY
DEC BH
DEC BL
DEC DH
DEC DL
CALL DELAY
DEC AH
JNZ LOOP4
CALL DISPLAY
MOV AL, 0AH
OUT 000CH, AL
DEC BH
DEC BL
DEC DH
DEC DL
CALL DELAY
CALL DISPLAY


;FOURTH INITIALIZED CONDITION
MOV BH, 03H
MOV BL, 06H
MOV DH, 09H
MOV DL, 03H
MOV AL, 09H
OUT 0004H, AL; SETTING UP LIGHTS
MOV AL, 21H
OUT 000CH, AL
MOV AH, 02H
LOOP5:
CALL DISPLAY
DEC BH
DEC BL
DEC DH
DEC DL
CALL DELAY
DEC AH
JNZ LOOP5
CALL DISPLAY
MOV AL, 11H
OUT 000CH, AL
DEC BH
DEC BL
DEC DH
DEC DL
CALL DELAY
CALL DISPLAY


JMP AGAIN ; GO TO FIRST INITIALIZED CONDITION




; SUBROUTINES
DISPLAY PROC NEAR
MOV AL, BH
OUT 0000H, AL
MOV AL, BL
OUT 0002H, AL
MOV AL, DH
OUT 0008H, AL
MOV AL, DL
OUT 000AH, AL
RET
DISPLAY ENDP


DELAY PROC NEAR
MOV CX, 0FFFFH
LOOP1:NOP
LOOP LOOP1
RET
DELAY ENDP



; [SOURCE]: C:\Users\Ayushi\Desktop\VNIT(Academics)\Semester-7\Microprocessor\Project\Traffic Light Controller\8086_Program.asm
